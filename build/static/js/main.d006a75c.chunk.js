(this.webpackJsonpconf_frontend=this.webpackJsonpconf_frontend||[]).push([[0],{241:function(e,t,n){},402:function(e,t,n){},432:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(47),c=n.n(r),o=(n(241),n(44)),s=n(13),i=n(436),l=n(437),u=n(9),d=n(16),f=n(18),b=n(442),j=n(10),h=n(1),m=function(e){var t=e.profile;return Object(h.jsxs)(i.a,{className:"m-3",children:[Object(h.jsx)(b.a.Img,{src:(null===t||void 0===t?void 0:t.avatar)?null===t||void 0===t?void 0:t.avatar:"https://firebasestorage.googleapis.com/v0/b/confessions-ef73b.appspot.com/o/avatars%2Favatar_default.png?alt=media&token=2ea9f8bf-ab92-4e71-b59e-af4875842be3",className:"mr-2",style:{borderRadius:"50%",width:"50px",height:"50px"}}),Object(h.jsx)(j.LinkContainer,{to:"/you",children:Object(h.jsxs)(b.a.Link,{className:"text-white",children:[Object(h.jsx)("span",{className:"cursor-pointer",children:null===t||void 0===t?void 0:t.username}),Object(h.jsx)("br",{}),Object(h.jsx)("span",{className:"mb-2 text-muted",children:"".concat(null===t||void 0===t?void 0:t.fname," ").concat(null===t||void 0===t?void 0:t.lname)})]})}),Object(h.jsx)(l.a,{children:Object(h.jsx)(j.LinkContainer,{to:"/profile/edit",children:Object(h.jsx)(b.a.Link,{className:"float-right text-white",children:Object(h.jsx)("i",{className:"fas fa-edit"})})})})]})},p=n(8),O=n.n(p),x=n(42),v=n(17),g="FOLLOW_SUCCESS",w="FOLLOW_ERROR",k="UNFOLLOW_SUCCESS",C=function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n,a,r){var c,o,s,i,l,u;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.getFirebase,c=r.getFirestore,t.prev=1,o=c(),s=a().firebase.auth.uid,(i=a().firebase.profile.following).push(e),t.next=8,o.collection("profile").doc(e).get();case 8:return l=t.sent,(u=l.data().followers).push(s),i=new Set(i),i=Object(x.a)(i),u=new Set(u),u=Object(x.a)(u),t.next=17,o.collection("profile").doc(s).update({following:i});case 17:return t.next=19,o.collection("profile").doc(e).update({followers:u});case 19:n({type:g}),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(1),console.log(t.t0),n({type:w,error:t.t0});case 26:case"end":return t.stop()}}),t,null,[[1,22]])})));return function(e,n,a){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n,a,r){var c,o,s,i,l,u;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.getFirebase,c=r.getFirestore,t.prev=1,o=c(),s=a().firebase.auth.uid,i=(i=a().firebase.profile.following).filter((function(t){return t!==e})),t.next=8,o.collection("profile").doc(e).get();case 8:return l=t.sent,u=(u=l.data().followers).filter((function(e){return e!==s})),i=new Set(i),i=Object(x.a)(i),u=new Set(u),u=Object(x.a)(u),t.next=17,o.collection("profile").doc(s).update({following:i});case 17:return t.next=19,o.collection("profile").doc(e).update({followers:u});case 19:n({type:k}),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(1),console.log(t.t0);case 25:case"end":return t.stop()}}),t,null,[[1,22]])})));return function(e,n,a){return t.apply(this,arguments)}}()},N=Object(d.d)(Object(u.b)((function(e){return{followers:e.firebase.profile.followers,following:e.firebase.profile.following,defaultAvatar:"https://firebasestorage.googleapis.com/v0/b/confessions-ef73b.appspot.com/o/avatars%2Favatar_default.png?alt=media&token=2ea9f8bf-ab92-4e71-b59e-af4875842be3",auth:e.firebase.auth}}),(function(e){return{followUser:function(t){return e(C(t))},unfollowUser:function(t){return e(y(t))}}})),Object(f.firestoreConnect)([{collection:"profile"}]))((function(e){var t=e.suggestion,n=e.following,a=(e.followers,e.followUser),r=e.auth,c=e.unfollowUser,o=e.defaultAvatar;return Object(h.jsxs)(i.a,{className:"m-auto",children:[Object(h.jsx)(b.a.Img,{src:(null===t||void 0===t?void 0:t.avatar)?null===t||void 0===t?void 0:t.avatar:o,className:"mr-2",style:{borderRadius:"50%",width:"50px",height:"50px"}}),Object(h.jsx)(j.LinkContainer,{to:"".concat(t.username),children:Object(h.jsxs)(b.a.Link,{className:"text-white",children:[t.username,Object(h.jsx)("br",{}),Object(h.jsx)("span",{className:"mb-2 text-muted",children:"".concat(t.fname," ").concat(t.lname)})]})}),Object(h.jsx)(l.a,{children:Object(h.jsx)(j.LinkContainer,{to:"#",children:"XBODMyuxsjQCw7LDM6ivYt0Atqq1"===t.id?Object(h.jsx)(b.a.Link,{className:"float-right text-white"}):(null===n||void 0===n?void 0:n.includes(t.id))?Object(h.jsx)(b.a.Link,{className:"float-right text-white",onClick:function(){return c(t.id)},children:"Unfollow"}):Object(h.jsx)(b.a.Link,{className:"float-right text-white",onClick:function(){r.uid?a(t.id):alert("Login first!")},children:"Follow"})})})]})})),S=function(){return Object(h.jsxs)(i.a,{children:[Object(h.jsx)(l.a,{className:"float-left m-2",children:Object(h.jsx)("p",{className:"lead",children:"Suggestions"})}),Object(h.jsx)(l.a,{children:Object(h.jsx)("p",{className:"float-right m-2 lead",children:"See all"})})]})},F=Object(d.d)(Object(u.b)((function(e){return{profile:e.firebase.profile,users:e.firestore.ordered.profile}})),Object(f.firestoreConnect)([{collection:"profile"}]))((function(e){var t=e.profile,n=e.users;return Object(h.jsxs)(b.a,{className:"position-fixed border-white",style:{width:"450px",background:"black"},children:[Object(h.jsx)(m,{profile:t}),Object(h.jsx)(S,{}),Object(h.jsx)(l.a,{children:Object(h.jsx)("div",{style:{overflowY:"scroll",height:"350px"},children:null===n||void 0===n?void 0:n.map((function(e,t){return Object(h.jsx)(N,{suggestion:e},e.id)}))})})]})})),E=n(32),A=n(233),L=n(66),I=n.n(L),G=n(438),R="CREATE_CONFESSION_ERROR",U="CREATE_CONFESSION_SUCCESS",D="GET_CONFESSION",q="LIKE_CONFESSION",T="UNLIKE_CONFESSION",M="DELETE_CONFESSION",Q="UPDATE_CONFESSION",P=Object(u.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{unfollowUser:function(t){return e(y(t))},likeConfession:function(t){return e(function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n,a,r){var c,o,s,i,l,u,d;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.getFirebase,c=r.getFirestore,t.prev=1,o=c(),s=a().firebase.auth.uid,t.next=6,o.collection("confessions").doc(e).get();case 6:return i=t.sent,(l=i.data().likes)||(l=[]),l.push(s),t.next=12,o.collection("profile").doc(s).get();case 12:return u=t.sent,(d=u.data().likedConfessions)||(d=[]),d.push(e),l=new Set(l),d=new Set(d),l=Object(x.a)(l),d=Object(x.a)(d),t.next=22,o.collection("confessions").doc(e).update({likes:l});case 22:return t.next=24,o.collection("profile").doc(s).update({likedConfessions:d});case 24:n({type:q}),t.next=30;break;case 27:t.prev=27,t.t0=t.catch(1),console.log(t.t0);case 30:case"end":return t.stop()}}),t,null,[[1,27]])})));return function(e,n,a){return t.apply(this,arguments)}}()}(t))},unlikeConfession:function(t){return e(function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n,a,r){var c,o,s,i,l,u,d;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.getFirebase,c=r.getFirestore,t.prev=1,o=c(),s=a().firebase.auth.uid,t.next=6,o.collection("confessions").doc(e).get();case 6:return i=t.sent,l=(l=i.data().likes).filter((function(e){return e!==s})),t.next=11,o.collection("profile").doc(s).get();case 11:return u=t.sent,d=(d=u.data().likedConfessions).filter((function(t){return t!==e})),t.next=16,o.collection("confessions").doc(e).update({likes:l});case 16:return t.next=18,o.collection("profile").doc(s).update({likedConfessions:d});case 18:n({type:T}),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(1),console.log(t.t0);case 24:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e,n,a){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.following,n=e.confession,a=e.followUser,r=e.auth,c=e.unfollowUser,o=e.likeConfession,s=e.unlikeConfession,u=function(e){var t;r.uid?("Follow"===e.target.innerHTML&&a(n.userId),("fas fa-heart"===e.target.className||"far fa-heart"===e.target.className)&&((null===(t=n.likes)||void 0===t?void 0:t.includes(r.uid))?s(n.id):o(n.id))):alert("Login first!")};return Object(h.jsxs)(i.a,{children:[Object(h.jsxs)(l.a,{children:[Object(h.jsx)(j.LinkContainer,{to:"#",onClick:u,children:Object(h.jsx)(b.a.Link,{className:"text-white",children:function(){var e,t;return Object(h.jsxs)("i",{className:"".concat((null===(e=n.likes)||void 0===e?void 0:e.includes(r.uid))?"fas":"far"," fa-heart"),children:[" ",0|(null===(t=n.likes)||void 0===t?void 0:t.length)]})}()})}),Object(h.jsx)(j.LinkContainer,{to:"/confession/".concat(n.id,"/#comments"),children:Object(h.jsx)(b.a.Link,{className:"text-white",children:function(){var e,t;return Object(h.jsxs)("i",{className:"".concat((null===(e=n.commentsFrom)||void 0===e?void 0:e.includes(r.uid))?"fas":"far"," fa-comment"),children:[" ",0|(null===(t=n.comments)||void 0===t?void 0:t.length)]})}()})})]}),Object(h.jsx)(l.a,{md:2,children:Object(h.jsx)(j.LinkContainer,{to:"#",children:"XBODMyuxsjQCw7LDM6ivYt0Atqq1"===n.userId?Object(h.jsx)(b.a.Link,{className:"float-right text-white"}):(null===t||void 0===t?void 0:t.includes(n.userId))?Object(h.jsx)(b.a.Link,{className:"float-right text-white",onClick:function(){return c(n.userId)},children:"Unfollow"}):Object(h.jsx)(b.a.Link,{className:"float-right text-white",onClick:u,children:"Follow"})})})]})})),B=Object(d.d)(Object(u.b)((function(e){var t=e.firestore.data.profile,n=t?t[e.firebase.auth.uid]:null;return{followers:e.firebase.profile.followers,following:e.firebase.profile.following,auth:e.firebase.auth,profile:n}}),(function(e){return{followUser:function(t){return e(C(t))},getConfession:function(t){return e(function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n,a,r){var c,o,s,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.getFirebase,c=r.getFirestore,t.prev=1,o=c(),t.next=5,o.collection("confessions").doc(e).get();case 5:return s=t.sent,(i=s.data().views)?i++:i=1,t.next=10,o.collection("confessions").doc(e).update({views:i});case 10:n({type:D,confession:s}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e,n,a){return t.apply(this,arguments)}}()}(t))},deleteConfession:function(t){return e(function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n,a,r){var c,o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.getFirebase,c=r.getFirestore,t.prev=1,o=c(),t.next=5,o.collection("confessions").doc(e).delete();case 5:n({type:M}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,a){return t.apply(this,arguments)}}()}(t))}}})),Object(f.firestoreConnect)((function(e){return[{collection:"profile",doc:e.auth.uid}]})))((function(e){var t,n,a,r=e.confession,c=e.followUser,o=(e.followers,e.following),l=e.getConfession,u=e.auth,d=e.deleteConfession,f=e.edit,m=(e.profile,Object(s.l)()),p="".concat(r.userFname," ").concat(r.userLname),O=m.pathname!=="/confession/".concat(r.id)?null===(t=r.content)||void 0===t?void 0:t.substring(0,100):r.content,x=0|r.views,v=I()(null===(n=r.createdAt)||void 0===n?void 0:n.toDate()).endOf("day").fromNow();v.startsWith("in")&&(v=I()(null===(a=r.createdAt)||void 0===a?void 0:a.toDate()).startOf("minutes").fromNow());var g=r.userAvatar?r.userAvatar:"https://firebasestorage.googleapis.com/v0/b/confessions-ef73b.appspot.com/o/avatars%2Favatar_default.png?alt=media&token=15370239-b13b-4d6a-baf2-a421cfeac3a2",w=m.pathname==="/confession/".concat(r.id)?"":" Read More...",k={background:"black"};return Object(h.jsxs)(b.a,{className:"overflow-hidden border-white",style:k,children:[Object(h.jsx)(j.LinkContainer,{to:"/".concat(r.username),children:Object(h.jsxs)(i.a,{className:"ml-2 cursor-pointer",children:[Object(h.jsx)(b.a.Img,{src:g,className:"mr-2",style:{borderRadius:"50%",width:"50px",height:"50px"}}),Object(h.jsxs)(b.a.Text,{children:[r.username,Object(h.jsx)("span",{className:"m-3",children:u.uid===r.userId?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.LinkContainer,{to:"#create-confession",onClick:function(){return f(r)},children:Object(h.jsx)(b.a.Link,{className:"text-white",children:Object(h.jsx)("i",{className:"fas fa-edit"})})}),Object(h.jsx)(j.LinkContainer,{to:m.pathname,onClick:function(){return d(r.id)},children:Object(h.jsx)(b.a.Link,{className:"text-white",children:Object(h.jsx)("i",{className:"fas fa-trash-alt",children:" "})})})]}):null}),Object(h.jsx)("br",{}),Object(h.jsx)("span",{className:"mb-2 text-muted",children:p})]})]})}),Object(h.jsx)(i.a,{className:"ml-2",children:Object(h.jsxs)("span",{className:"text-muted",children:[x," views \xb7 ",v]})}),Object(h.jsxs)(G.a,{fluid:!0,children:[O,Object(h.jsx)(j.LinkContainer,{to:"/confession/".concat(r.id),onClick:function(){return l(r.id)},children:Object(h.jsx)(b.a.Link,{className:"text-secondary",children:w})})]}),Object(h.jsx)(b.a,{className:"pt-2 pb-2 pl-3 pr-3",style:k,children:Object(h.jsx)(P,{following:o,confession:r,followUser:c})})]})})),Y=n(7),X=n(39),W=n(37),J=n(38),Z=n(41),z=n(40),K=function(e){Object(Z.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(W.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={content:"",location:e.props.location.pathname},e.handleChange=function(t){e.setState(Object(X.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){var n;t.preventDefault(),"Confess"===t.target.innerText&&e.props.createConfession(e.state),"Edit"===t.target.innerText&&e.props.editConfession(Object(Y.a)(Object(Y.a)({},e.state),{},{id:null===(n=e.props.editableConfession)||void 0===n?void 0:n.id})),e.reset(),e.props.edit(null)},e.reset=function(t){e.setState({content:""})},e}return Object(J.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t;this.setState({content:e.editableConfession?null===(t=e.editableConfession)||void 0===t?void 0:t.content:""})}},{key:"render",value:function(){return Object(h.jsx)("div",{id:"create-confession",className:"".concat(this.props.location.pathname.startsWith("/confession")?"position-fixed":""),children:Object(h.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("textarea",{required:!0,type:"text",id:"content",rows:10,cols:50,value:this.state.content,className:"text-white border-white form-control",style:{background:"black"},placeholder:"Confess here".concat("/explore"===this.props.location.pathname?" Anonymously":"","..."),onChange:this.handleChange})}),Object(h.jsx)("button",{type:"submit",className:"border-white btn btn-secondary btn-block btn-sm",style:{background:"black"},children:this.props.editableConfession||this.props.location.pathname.startsWith("/confession")?"Edit":"Confess"})]})})}}]),n}(a.Component),V=Object(u.b)(null,(function(e){return{createConfession:function(t){return e(function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n,a,r){var c,o,s,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.getFirebase,c=r.getFirestore,t.prev=1,o=c(),"/explore"!==e.location){t.next=8;break}return t.next=6,o.collection("confessions").add({content:e.content,createdAt:new Date,username:"anonymous",userFname:"Anonymous",userLname:"User",userId:"XBODMyuxsjQCw7LDM6ivYt0Atqq1",userAvatar:"https://firebasestorage.googleapis.com/v0/b/confessions-ef73b.appspot.com/o/avatars%2Favatar_anonymous.png?alt=media&token=2ea9f8bf-ab92-4e71-b59e-af4875842be3"});case 6:t.next=12;break;case 8:return s=a().firebase.profile,i=a().firebase.auth.uid,t.next=12,o.collection("confessions").add({content:e.content,createdAt:new Date,username:s.username,userFname:s.fname,userLname:s.lname,userId:i,userAvatar:s.avatar?s.avatar:"https://firebasestorage.googleapis.com/v0/b/confessions-ef73b.appspot.com/o/avatars%2Favatar_default.png?alt=media&token=2ea9f8bf-ab92-4e71-b59e-af4875842be3"});case 12:n({type:U,confession:e}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),n({type:R,error:t.t0});case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e,n,a){return t.apply(this,arguments)}}()}(t))},editConfession:function(t){return e(function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n,a,r){var c,o,s,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.getFirebase,c=r.getFirestore,t.prev=1,o=e.content,s=e.id,i=c(),t.next=6,i.collection("confessions").doc(s).update({content:o});case 6:n({type:Q}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n,a){return t.apply(this,arguments)}}()}(t))}}}))(Object(s.o)(K)),H=Object(d.d)(Object(u.b)((function(e,t){var n=e.firebase.auth,a=e.firestore.data.profile,r=a?a[n.uid]:null;return{confessions:t.confessions?t.confessions:e.firestore.ordered.confessions,auth:n,profile:r}})),Object(f.firestoreConnect)([{collection:"confessions",limit:100,orderBy:["createdAt","desc"],startAfter:0},{collection:"profile"}]))((function(e){var t,n,r=e.confessions,c=e.auth,o=e.profile,i=Object(a.useState)(null),l=Object(E.a)(i,2),u=l[0],d=l[1],f=Object(s.l)();"/likes"===f.pathname&&(r=r.filter((function(e){var t;if(null===(t=e.likes)||void 0===t?void 0:t.includes(c.uid))return e})));var b=function(e){d(e)},j={default:"/explore"===f.pathname?4:"/likes"===f.pathname?5:1===(null===(t=r)||void 0===t?void 0:t.length)&&f.pathname!=="/".concat(o.username)&&"/you"!==f.pathname||0===(null===(n=r)||void 0===n?void 0:n.length)?1:3,1100:2,700:1};return Object(h.jsxs)(A.a,{breakpointCols:j,className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:[f.pathname==="/".concat(null===o||void 0===o?void 0:o.username)||"/"===f.pathname||"/you"===f.pathname||"/explore"===f.pathname?Object(h.jsx)(V,{editableConfession:u,edit:b}):null,r&&r.map((function(e,t){return Object(h.jsx)("div",{children:Object(h.jsx)(B,{confession:e,edit:b})},e.id)}))]})})),_=Object(u.b)((function(e){return{auth:e.firebase.auth}}))((function(e){return e.auth.uid?Object(h.jsxs)(i.a,{children:[Object(h.jsx)(l.a,{sm:12,md:12,lg:7,xl:8,children:Object(h.jsx)(H,{})}),Object(h.jsx)(l.a,{sm:12,md:12,lg:5,xl:4,children:Object(h.jsx)(F,{})})]}):Object(h.jsx)(s.c,{to:"/explore"})})),$=n(440),ee=n(441),te="SIGNIN_SUCCESS",ne="SIGNIN_ERROR",ae="SIGNUP_ERROR",re="SIGNUP_SUCCESS",ce="SIGNOUT_SUCCESS",oe="SIGNOUT_ERROR",se=Object(u.b)((function(e){return{avatar:e.firebase.profile.avatar?e.firebase.profile.avatar:"https://firebasestorage.googleapis.com/v0/b/confessions-ef73b.appspot.com/o/avatars%2Favatar_default.png?alt=media&token=2ea9f8bf-ab92-4e71-b59e-af4875842be3"}}),(function(e){return{signOut:function(){return e(function(){var e=Object(v.a)(O.a.mark((function e(t,n,a){var r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.getFirebase,c=r(),e.next=4,c.auth().signOut();case 4:t({type:ce});case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.signOut,n=e.avatar;return Object(h.jsx)($.a,{id:"basic-navbar-nav",className:"right",children:Object(h.jsxs)(ee.a,{className:"mr-auto",children:[Object(h.jsx)(j.LinkContainer,{to:"/",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-home"})})}),Object(h.jsx)(j.LinkContainer,{to:"/messenger",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-comments"})})}),Object(h.jsx)(j.LinkContainer,{to:"/likes",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-heart"})})}),Object(h.jsx)(j.LinkContainer,{to:"/explore",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-compass"})})}),Object(h.jsx)(j.LinkContainer,{to:"/explore",children:Object(h.jsx)(ee.a.Link,{onClick:t,children:Object(h.jsx)("i",{className:"fas fa-sign-out-alt"})})}),Object(h.jsx)(j.LinkContainer,{to:"/you",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("img",{src:n,style:{borderRadius:"50%",width:"40px",height:"40px",marginTop:"-7px"}})})})]})})})),ie=function(){return Object(h.jsx)($.a,{id:"basic-navbar-nav",className:"right",children:Object(h.jsxs)(ee.a,{className:"mr-auto",children:[Object(h.jsx)(j.LinkContainer,{to:"/",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-home"})})}),Object(h.jsx)(j.LinkContainer,{to:"/explore",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-compass"})})}),Object(h.jsx)(j.LinkContainer,{to:"/signin",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-sign-in-alt"})})}),Object(h.jsx)(j.LinkContainer,{to:"/signup",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-user-plus"})})}),Object(h.jsx)(j.LinkContainer,{to:"/account",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("img",{src:"data:image/png;base64,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",style:{borderRadius:"50%",width:"40px",height:"40px",marginTop:"-7px"}})})})]})})},le=Object(u.b)((function(e){return{auth:e.firebase.auth}}))((function(e){var t=e.auth,n=Object(a.useState)([{profilePic:"https://avatars.githubusercontent.com/u/48760865?v=4"}]),r=Object(E.a)(n,2);r[0],r[1];return Object(h.jsx)($.a,{style:{background:"rgba(0, 0, 0, 0.5)",borderBottom:"1px solid white"},variant:"dark",expand:"lg",className:"sticky-top",collapseOnSelect:!0,children:Object(h.jsxs)(G.a,{fluid:!0,children:[Object(h.jsx)(j.LinkContainer,{to:"/",children:Object(h.jsx)($.a.Brand,{children:"Confession"})}),t.uid?Object(h.jsx)(se,{}):Object(h.jsx)(ie,{})]})})})),ue=function(e){Object(Z.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(W.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(X.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signIn(e.state)},e}return Object(J.a)(n,[{key:"render",value:function(){return this.props.auth.uid?Object(h.jsx)(s.c,{to:"/"}):Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(h.jsx)("h3",{children:"Sign In"}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Email address"}),Object(h.jsx)("input",{type:"email",id:"email",className:"form-control",placeholder:"Enter email",onChange:this.handleChange,style:{background:"black"}})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{type:"password",id:"password",className:"form-control",placeholder:"Enter password",onChange:this.handleChange,style:{background:"black"}})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(h.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1",style:{background:"black"}}),Object(h.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Remember me"})]})}),Object(h.jsx)("button",{type:"submit",className:"btn btn-primary btn-block border-white",style:{background:"black"},children:"Submit"})]})})}}]),n}(a.Component),de=Object(u.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e(function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n,a,r){var c,o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,t.prev=1,o=c(),t.next=5,o.auth().signInWithEmailAndPassword(e.email,e.password);case 5:n({type:te}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:ne,error:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,a){return t.apply(this,arguments)}}()}(t))}}}))(ue),fe=function(e){Object(Z.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(W.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",fname:"",lname:"",username:""},e.handleChange=function(t){e.setState(Object(X.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signUp(e.state)},e}return Object(J.a)(n,[{key:"render",value:function(){return this.props.auth.uid?Object(h.jsx)(s.c,{to:"/"}):Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(h.jsx)("h3",{children:"Register"}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"First Name"}),Object(h.jsx)("input",{style:{background:"black"},type:"text",id:"fname",className:"form-control",placeholder:"Enter First Name",onChange:this.handleChange})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Last Name"}),Object(h.jsx)("input",{style:{background:"black"},type:"text",id:"lname",className:"form-control",placeholder:"Enter Last Name",onChange:this.handleChange})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Email address"}),Object(h.jsx)("input",{style:{background:"black"},type:"email",id:"email",className:"form-control",placeholder:"Enter email",onChange:this.handleChange})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{style:{background:"black"},type:"password",id:"password",className:"form-control",placeholder:"Enter password",onChange:this.handleChange})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(h.jsx)("input",{style:{background:"black"},type:"checkbox",className:"custom-control-input",id:"customCheck1"}),Object(h.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Remember me"})]})}),Object(h.jsx)("button",{style:{background:"black"},type:"submit",className:"btn border-white btn-primary btn-block",children:"Sign Up"})]})})}}]),n}(a.Component),be=Object(u.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{signUp:function(t){return e(function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n,a,r){var c,o,s,i,l;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,o=r.getFirestore,t.prev=1,s=c(),i=o(),t.next=6,s.auth().createUserWithEmailAndPassword(e.email,e.password);case 6:return l=t.sent,t.next=9,i.collection("profile").doc(l.user.uid).set({fname:e.fname,lname:e.lname,username:e.email.split("@")[0],followers:[l.user.uid],following:[l.user.uid]});case 9:n({type:"SIGNUP_SUCCESS"}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),n({type:ae,error:t.t0});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,n,a){return t.apply(this,arguments)}}()}(t))}}}))(fe),je="CREATE_COMMENT",he="DELETE_COMMENT",me="EDIT_COMMENT",pe=function(e){Object(Z.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(W.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={content:"",confession:e.props.confession},e.handleChange=function(t){e.setState(Object(X.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){var n;t.preventDefault(),"Comment"===t.target[1].innerHTML?e.props.createComment(e.state):e.props.editComment(null===(n=e.props.editableComment)||void 0===n?void 0:n.id,e.state),e.props.setEditable(!1),e.props.setEditableComment(null),e.reset()},e.reset=function(t){e.setState({content:""})},e}return Object(J.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t;this.setState({content:e.editableComment?null===(t=e.editableComment)||void 0===t?void 0:t.content:""})}},{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("textarea",{required:!0,type:"text",id:"content",rows:5,cols:50,value:this.state.content,className:"text-white border-white form-control",style:{background:"black"},placeholder:"Comment here".concat("/explore"===this.props.location.pathname?" Anonymously":"","..."),onChange:this.handleChange})}),Object(h.jsx)("button",{type:"submit",className:"border-white btn btn-secondary btn-block btn-sm",style:{background:"black"},children:this.props.editable?"Edit Comment":"Comment"})]}),Object(h.jsx)("hr",{})]})}}]),n}(a.Component),Oe=Object(u.b)(null,(function(e){return{createComment:function(t){return e(function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n,a,r){var c,o,s,i,l,u,d,f,b;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.getFirebase,c=r.getFirestore,t.prev=1,o=c(),s=a().firebase.auth.uid,t.next=6,o.collection("comments").add({content:e.content,confessionId:e.confession.id,userId:s,createdAt:new Date,likes:[]});case 6:return i=t.sent,t.next=9,o.collection("profile").doc(s).get();case 9:return l=t.sent,(u=l.data().commentedConfessions)||(u=[]),u.push(i.id),t.next=15,o.collection("confessions").doc(e.confession.id).get();case 15:return d=t.sent,f=d.data().comments,b=d.data().commentsFrom,f||(f=[]),f.push(i.id),b||(b=[]),b.push(s),b=new Set(b),b=Object(x.a)(b),t.next=26,o.collection("profile").doc(s).update({commentedConfessions:u});case 26:return t.next=28,o.collection("confessions").doc(e.confession.id).update({comments:f,commentsFrom:b});case 28:n({type:je}),t.next=34;break;case 31:t.prev=31,t.t0=t.catch(1),console.log(t.t0);case 34:case"end":return t.stop()}}),t,null,[[1,31]])})));return function(e,n,a){return t.apply(this,arguments)}}()}(t))},editComment:function(t,n){return e(function(e,t){return function(){var n=Object(v.a)(O.a.mark((function n(a,r,c){var o,s;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.getFirebase,o=c.getFirestore,n.prev=1,s=o(),n.next=5,s.collection("comments").doc(e).update({content:t.content});case 5:a({type:me}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e,t,a){return n.apply(this,arguments)}}()}(t,n))}}}))(Object(s.o)(pe)),xe=Object(u.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{deleteComment:function(t){return e(function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n,a,r){var c,o,s,i,l,u,d,f,b,j,h,m;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.getFirebase,c=r.getFirestore,t.prev=1,o=c(),s=a().firebase.auth.uid,t.next=6,o.collection("comments").doc(e).get().then((function(e){return e.data()}));case 6:return i=t.sent,t.next=9,o.collection("confessions").doc(i.confessionId).get().then((function(e){return e.data()}));case 9:return l=t.sent,t.next=12,o.collection("profile").doc(s).get().then((function(e){return e.data()}));case 12:u=t.sent,d=(d=u.commentedConfessions).filter((function(t){return t!==e})),f=l.comments.filter((function(t){return t!==e})),b=0,t.t0=O.a.keys(f);case 18:if((t.t1=t.t0()).done){t.next=26;break}return j=t.t1.value,t.next=22,o.collection("comments").doc(j).get().then((function(e){return e.data()}));case 22:(null===(h=t.sent)||void 0===h?void 0:h.userId)===s&&b++,t.next=18;break;case 26:return b||(m=l.commentsFrom.filter((function(e){return e!==s}))),t.next=29,o.collection("comments").doc(e).delete();case 29:return t.next=31,o.collection("profile").doc(s).update({commentedConfessions:d});case 31:return t.next=33,o.collection("confessions").doc(i.confessionId).update({comments:f,commentsFrom:m});case 33:n({type:he}),t.next=39;break;case 36:t.prev=36,t.t2=t.catch(1),console.log(t.t2);case 39:case"end":return t.stop()}}),t,null,[[1,36]])})));return function(e,n,a){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.comment,n=e.profile,a=e.auth,r=e.deleteComment,c=e.setEditable,o=(e.editable,e.edit),s=null===n||void 0===n?void 0:n.username,u="".concat(null===n||void 0===n?void 0:n.fname," ").concat(null===n||void 0===n?void 0:n.lname),d=I()(t.createdAt.toDate()).endOf("day").fromNow();d.startsWith("in")&&(d=I()(t.createdAt.toDate()).startOf("minutes").fromNow());return Object(h.jsxs)("div",{children:[Object(h.jsxs)(i.a,{children:[Object(h.jsx)(l.a,{style:{maxWidth:"60px"},children:Object(h.jsx)(b.a.Img,{src:"https://avatars.githubusercontent.com/u/48760865?v=4",className:"mr-2",style:{borderRadius:"50%",width:"50px",height:"50px"}})}),Object(h.jsx)(l.a,{children:Object(h.jsxs)(b.a.Text,{children:[s," \xb7 ",Object(h.jsx)("span",{className:"mb-2 text-muted",children:d}),Object(h.jsx)("br",{}),Object(h.jsx)("span",{className:"mb-2 text-muted",children:u})]})}),Object(h.jsx)(l.a,{children:Object(h.jsx)("span",{className:"m-3",children:a.uid===t.userId?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.LinkContainer,{to:"#create-comment",children:Object(h.jsx)(b.a.Link,{className:"text-white",onClick:function(){c(!0),o(t)},children:Object(h.jsx)("i",{className:"fas fa-edit"})})}),Object(h.jsx)(j.LinkContainer,{to:"#",onClick:function(){return r(t.id)},children:Object(h.jsx)(b.a.Link,{className:"text-white",children:Object(h.jsx)("i",{className:"fas fa-trash-alt",children:" "})})})]}):null})})]}),Object(h.jsx)(G.a,{children:t.content})]})})),ve=Object(d.d)(Object(u.b)((function(e,t){var n,a,r=e.firestore.ordered.comments;return{comments:r=null===(a=r=null===(n=r)||void 0===n?void 0:n.filter((function(e){return e.confessionId===t.confession.id})))||void 0===a?void 0:a.map((function(t){return{comment:t,profile:e.firestore.data.profile?e.firestore.data.profile[t.userId]:null}}))}})),Object(f.firestoreConnect)((function(e){return[{collection:"comments",orderBy:["createdAt","desc"],limit:20},{collection:"profile"}]})))((function(e){var t,n,r=e.comments,c=e.confession,o=Object(a.useState)(!1),s=Object(E.a)(o,2),i=s[0],l=s[1],u=Object(a.useState)(null),d=Object(E.a)(u,2),f=d[0],j=d[1],m=function(e){j(e)};return Object(h.jsxs)(b.a,{style:{border:"1px solid white",background:"black"},className:"p-3",children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)(b.a.Title,{children:["".concat(0|(null===(t=c.comments)||void 0===t?void 0:t.length))," Comment",1===(null===(n=c.comments)||void 0===n?void 0:n.length)?"":"s"]}),Object(h.jsx)("div",{children:Object(h.jsx)(Oe,{confession:c,editable:i,editableComment:f,setEditable:l,setEditableComment:j})})]}),null===r||void 0===r?void 0:r.map((function(e){return Object(h.jsxs)("div",{children:[Object(h.jsx)(xe,{comment:e.comment,profile:e.profile,setEditable:l,editable:i,edit:m}),Object(h.jsx)("hr",{})]},e.comment.id)}))]})})),ge=Object(d.d)(Object(u.b)((function(e,t){var n=t.match.params.id,a=e.firestore.data.confessions,r=a?a[n]:null;return{confession:r=Object(Y.a)(Object(Y.a)({},r),{},{id:n}),auth:e.firebase.auth}})),Object(f.firestoreConnect)((function(e){return[{collection:"confessions",doc:e.match.params.id}]})))((function(e){var t=e.confession,n=e.auth,r=Object(a.useState)(null),c=Object(E.a)(r,2),o=c[0],s=c[1],u=function(e){s(e)};return Object(h.jsx)(G.a,{fluid:!0,children:Object(h.jsxs)(i.a,{className:"overflow-hidden",children:[Object(h.jsxs)(l.a,{lg:8,md:8,sm:12,children:[Object(h.jsx)(B,{confession:t,edit:u}),Object(h.jsx)("br",{}),Object(h.jsx)(ve,{confession:t})]}),t.userId===n.uid?Object(h.jsx)(l.a,{lg:4,md:4,sm:12,children:Object(h.jsx)(V,{editableConfession:o,edit:u})}):null]})})})),we=function(){return Object(h.jsx)(H,{})},ke=(n(402),n(439)),Ce=Object(d.d)(Object(u.b)((function(e,t){var n,a,r,c=e.firestore.data.profile,o=e.firestore.data.confessions,s=o&&Object.keys(o),i=c?c[e.firebase.auth.uid]:null,l=c&&Object.keys(c),u=t.match.params.username;if(o=null===(n=o=o&&Object.values(o))||void 0===n?void 0:n.map((function(e,t){return Object(Y.a)(Object(Y.a)({},e),{},{id:s[t]})})),u===(null===(a=i)||void 0===a?void 0:a.username)||"/you"===t.location.pathname)i=Object(Y.a)(Object(Y.a)({},i),{},{id:e.firebase.auth.uid}),o=null===(r=o)||void 0===r?void 0:r.filter((function(t){return(null===t||void 0===t?void 0:t.userId)===e.firebase.auth.uid}));else if("anonymous"===u){var d;o=null===(d=o)||void 0===d?void 0:d.filter((function(e){return"XBODMyuxsjQCw7LDM6ivYt0Atqq1"===e.userId})),i={username:"anonymous",fname:"no name",lname:""}}else{var f,b,j;c=null===(f=c=c&&Object.values(c))||void 0===f?void 0:f.map((function(e,t){return Object(Y.a)(Object(Y.a)({},e),{},{id:l[t]})})),i=null===(b=c)||void 0===b?void 0:b.find((function(e){return e.username===u})),o=null===(j=o)||void 0===j?void 0:j.filter((function(e){var t;return(null===e||void 0===e?void 0:e.userId)===(null===(t=i)||void 0===t?void 0:t.id)}))}return{auth:e.firebase.auth,profile:i,confessions:o}})),Object(f.firestoreConnect)((function(e){return[{collection:"profile",doc:e.auth.uid},{collection:"confessions",orderBy:["createdAt","desc"],startAfter:0},{collection:"profiles"}]})))((function(e){var t,n,a=e.profile,r=e.confessions,c=(e.match,e.auth),o=Object(s.l)();return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsxs)(i.a,{children:[Object(h.jsx)(l.a,{xs:12,md:4,lg:4,xl:4,children:Object(h.jsx)(ke.a,{src:"/anonymous"!==o.pathname?(null===a||void 0===a?void 0:a.avatar)?null===a||void 0===a?void 0:a.avatar:"https://firebasestorage.googleapis.com/v0/b/confessions-ef73b.appspot.com/o/avatars%2Favatar_default.png?alt=media&token=2ea9f8bf-ab92-4e71-b59e-af4875842be3":"https://firebasestorage.googleapis.com/v0/b/confessions-ef73b.appspot.com/o/avatars%2Favatar_anonymous.png?alt=media&token=2ea9f8bf-ab92-4e71-b59e-af4875842be3",roundedCircle:!0,width:"200px",height:"200px"})}),Object(h.jsxs)(l.a,{xs:12,md:6,lg:6,xl:6,children:[Object(h.jsxs)(i.a,{className:"mt-3",children:[Object(h.jsxs)(l.a,{children:[Object(h.jsx)("span",{className:"cursor-pointer lead",children:null===a||void 0===a?void 0:a.username}),Object(h.jsx)("br",{}),Object(h.jsx)("span",{className:"mb-2 text-muted",children:"".concat(null===a||void 0===a?void 0:a.fname," ").concat(null===a||void 0===a?void 0:a.lname)})]}),Object(h.jsx)(l.a,{children:Object(h.jsx)(j.LinkContainer,{to:"/profile/edit",children:Object(h.jsx)(b.a.Link,{className:"float-right mt-3 mr-5 text-white",children:(null===a||void 0===a?void 0:a.id)===c.uid?Object(h.jsxs)(h.Fragment,{children:["Edit Profile ",Object(h.jsx)("i",{className:"fas fa-edit"})]}):null})})})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),"/anonymous"!==o.pathname?Object(h.jsxs)("p",{className:"lead",children:["".concat(0|(null===r||void 0===r?void 0:r.length)," Confessions")," \xa0\xa0\xb7 \xa0\xa0","".concat(0|(null===a||void 0===a||null===(t=a.followers)||void 0===t?void 0:t.length)," Followers")," \xa0\xa0\xb7 \xa0\xa0","".concat(0|(null===a||void 0===a||null===(n=a.following)||void 0===n?void 0:n.length)," Following")]}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("p",{children:"This account follows no one. No one follows this account."})})]}),Object(h.jsx)(l.a,{xs:12,md:2,lg:2,xl:2})]}),Object(h.jsx)("br",{}),Object(h.jsx)(i.a,{children:Object(h.jsx)(H,{confessions:r})})]})})),ye=n(115);n(434),n(404),n(433);ye.a.initializeApp({apiKey:"AIzaSyAxvrD76ypETsfy64vEjDjYvIFJvX_se8w",authDomain:"confessions-ef73b.firebaseapp.com",projectId:"confessions-ef73b",storageBucket:"confessions-ef73b.appspot.com",messagingSenderId:"180663555283",appId:"1:180663555283:web:51a8ddab09d8372e803026",measurementId:"G-S5KVS39SWM"}),ye.a.firestore().settings({timeStampsInSnapshots:!0});var Ne=ye.a,Se="GET_USERS",Fe="UPDATE_PROFILE",Ee=Object(d.d)(Object(u.b)((function(e,t){var n=e.firestore.data.profile,a=n?n[e.firebase.auth.uid]:null;return{auth:e.firebase.auth,profile:a}}),(function(e){return{updateProfile:function(t,n){return e(function(e,t){return function(){var n=Object(v.a)(O.a.mark((function n(a,r,c){var o,s,i,l,u,d,f;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=c.getFirebase,s=c.getFirestore,n.prev=1,i=o(),l=s(),u=r().firebase.auth.uid,d="avatars",f=i.storage().ref("".concat(d,"/avatar_").concat(e)),n.next=9,f.put(t);case 9:(f=i.storage().ref()).child("".concat(d,"/avatar_").concat(e)).getDownloadURL().then(function(){var t=Object(v.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.collection("profile").doc(e).update({avatar:n});case 2:return t.next=4,l.collection("confessions").get().then((function(e){return e.docs.forEach(function(){var e=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.data().userId!==u){e.next=3;break}return e.next=3,l.collection("confessions").doc(t.id).update({userAvatar:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a({type:Fe}),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(1),console.log(n.t0);case 17:case"end":return n.stop()}}),n,null,[[1,14]])})));return function(e,t,a){return n.apply(this,arguments)}}()}(t,n))}}})),Object(f.firestoreConnect)((function(e){return[{collection:"profile",doc:e.auth.uid}]})))((function(e){var t=e.auth,n=e.profile,r=e.updateProfile,c=Object(a.useState)({}),o=Object(E.a)(c,2),s=o[0],i=o[1];return Object(h.jsx)("div",{className:"container text-center",children:Object(h.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var n=s.avatar;r(t.uid,n)}(e)},children:[Object(h.jsx)(ke.a,{id:"profile-avatar",src:(null===n||void 0===n?void 0:n.avatar)?null===n||void 0===n?void 0:n.avatar:"https://firebasestorage.googleapis.com/v0/b/confessions-ef73b.appspot.com/o/avatars%2Favatar_default.png?alt=media&token=2ea9f8bf-ab92-4e71-b59e-af4875842be3",width:"100",height:"100",roundedCircle:!0}),Object(h.jsxs)("div",{className:"text-center",children:[Object(h.jsx)("input",{id:"avatar",type:"file",placeholder:"Edit Avatar",className:"d-none",onChange:function(e){return i(Object(Y.a)(Object(Y.a)({},s),{},{avatar:e.target.files[0]}))}}),Object(h.jsx)("label",{htmlFor:"avatar",className:"cursor-pointer",children:Object(h.jsxs)(b.a.Link,{className:"text-white",children:["Edit Avatar ",Object(h.jsx)("i",{className:"fas fa-edit"})]})})]}),Object(h.jsx)("button",{className:"w-25 btn btn-block btn-secondary btn-sm",children:"Make Changes"})]})})})),Ae=function(){return Object(h.jsxs)(o.BrowserRouter,{children:[Object(h.jsx)(le,{className:"position-fixed"}),Object(h.jsx)("main",{className:"py-3 text-white container-fluid",children:Object(h.jsxs)(s.g,{children:[Object(h.jsx)(s.d,{path:"/",exact:!0,component:_}),Object(h.jsx)(s.d,{path:"/profile/edit",component:Ee}),Object(h.jsx)(s.d,{path:"/signin",component:de}),Object(h.jsx)(s.d,{path:"/signup",component:be}),Object(h.jsx)(s.d,{path:"/confess",component:V}),Object(h.jsx)(s.d,{path:"/explore",component:we}),Object(h.jsx)(s.d,{path:"/confession/:id",component:ge}),Object(h.jsx)(s.d,{path:"/likes",component:H}),Object(h.jsx)(s.d,{path:"/:username",component:Ce}),Object(h.jsx)(s.d,{path:"/you",component:Ce})]})})]})},Le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,443)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},Ie=n(236),Ge=n(82),Re={auth:{authError:null}},Ue={follow:{followError:null}},De={users:[]},qe={comment:{commentError:null}},Te=Object(d.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return console.log("Signin Success"),Object(Y.a)(Object(Y.a)({},e),{},{authError:null});case ne:return console.log("Signin Error"),Object(Y.a)(Object(Y.a)({},e),{},{authError:t.error});case re:return console.log("Signup Success"),Object(Y.a)(Object(Y.a)({},e),{},{authError:null});case ae:return console.log("Signup Error"),Object(Y.a)(Object(Y.a)({},e),{},{authError:t.error});case ce:return console.log("Signout Success"),Object(Y.a)(Object(Y.a)({},e),{},{authError:null});case oe:return console.log("Signout Error"),Object(Y.a)(Object(Y.a)({},e),{},{authError:t.error});default:return e}},confessions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return console.log(t.confession),e;case R:return console.log("create confession error"),e;case D:return t.confession;case q:return console.log("like succcess"),e;case T:return console.log("unlike success"),e;case M:return console.log("delete confession success"),e;case Q:return console.log("update confession success"),e;default:return e}},follow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return console.log("Follow Success"),Object(Y.a)(Object(Y.a)({},e),{},{followError:null});case w:return console.log("Follow error"),Object(Y.a)(Object(Y.a)({},e),{},{followError:t.error});case k:return console.log("unfollow success"),Object(Y.a)(Object(Y.a)({},e),{},{followError:null});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Se:return Object(Y.a)(Object(Y.a)({},e),{},{users:t.snapshots});case Fe:default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return console.log("comment success"),Object(Y.a)(Object(Y.a)({},e),{},{commentError:null});case he:return console.log("delete comment success"),e;case me:return console.log("edit confession success"),e;default:return e}},firestore:Ge.firestoreReducer,firebase:f.firebaseReducer}),Me=Object(d.e)(Te,Object(d.d)(Object(d.a)(Ie.a.withExtraArgument({getFirebase:f.getFirebase,getFirestore:Ge.getFirestore})),Object(f.reactReduxFirebase)(Ne,{attachAuthIsReady:!0,useFirestoreForProfile:!0,userProfile:"profile"}),Object(Ge.reduxFirestore)(Ne)));Me.firebaseAuthIsReady.then((function(){c.a.render(Object(h.jsx)(u.a,{store:Me,children:Object(h.jsx)(Ae,{})}),document.getElementById("root"))})),Le()}},[[432,1,2]]]);
//# sourceMappingURL=main.d006a75c.chunk.js.map