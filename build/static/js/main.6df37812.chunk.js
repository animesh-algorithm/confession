(this.webpackJsonpconf_frontend=this.webpackJsonpconf_frontend||[]).push([[0],{241:function(e,t,n){},402:function(e,t,n){},432:function(e,t,n){"use strict";n.r(t);var r=n(2),s=n(45),c=n.n(s),o=(n(241),n(43)),a=n(11),i=n(435),l=n(436),u=n(10),d=n(19),j=n(23),f=n(440),b=n(12),h=n(1),m=function(e){var t=e.profile;return Object(h.jsxs)(i.a,{className:"m-3",children:[Object(h.jsx)(f.a.Img,{src:"https://avatars.githubusercontent.com/u/48760865?v=4",className:"mr-2",style:{borderRadius:"50%",width:"50px",height:"50px"}}),Object(h.jsxs)(f.a.Text,{children:[t.username,Object(h.jsx)("br",{}),Object(h.jsx)("span",{className:"mb-2 text-muted",children:"".concat(t.fname," ").concat(t.lname)})]}),Object(h.jsx)(l.a,{children:Object(h.jsx)(b.LinkContainer,{to:"/profile/edit",children:Object(h.jsx)(f.a.Link,{className:"float-right text-white",children:Object(h.jsx)("i",{className:"fas fa-edit"})})})})]})},p=n(13),O=n.n(p),x=n(41),g=n(21),v="FOLLOW_SUCCESS",w="FOLLOW_ERROR",k="UNFOLLOW_SUCCESS",C=function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n,r,s){var c,o,a,i,l,u;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.getFirebase,c=s.getFirestore,t.prev=1,o=c(),a=r().firebase.auth.uid,(i=r().firebase.profile.following).push(e),t.next=8,o.collection("profile").doc(e).get();case 8:return l=t.sent,(u=l.data().followers).push(a),i=new Set(i),i=Object(x.a)(i),u=new Set(u),u=Object(x.a)(u),t.next=17,o.collection("profile").doc(a).update({following:i});case 17:return t.next=19,o.collection("profile").doc(e).update({followers:u});case 19:n({type:v}),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(1),console.log(t.t0),n({type:w,error:t.t0});case 26:case"end":return t.stop()}}),t,null,[[1,22]])})));return function(e,n,r){return t.apply(this,arguments)}}()},N=function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n,r,s){var c,o,a,i,l,u;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.getFirebase,c=s.getFirestore,t.prev=1,o=c(),a=r().firebase.auth.uid,i=(i=r().firebase.profile.following).filter((function(t){return t!==e})),t.next=8,o.collection("profile").doc(e).get();case 8:return l=t.sent,u=(u=l.data().followers).filter((function(e){return e!==a})),i=new Set(i),i=Object(x.a)(i),u=new Set(u),u=Object(x.a)(u),t.next=17,o.collection("profile").doc(a).update({following:i});case 17:return t.next=19,o.collection("profile").doc(e).update({followers:u});case 19:n({type:k}),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(1),console.log(t.t0);case 25:case"end":return t.stop()}}),t,null,[[1,22]])})));return function(e,n,r){return t.apply(this,arguments)}}()},y=Object(d.d)(Object(u.b)((function(e){return{followers:e.firebase.profile.followers,following:e.firebase.profile.following,auth:e.firebase.auth}}),(function(e){return{followUser:function(t){return e(C(t))},unfollowUser:function(t){return e(N(t))}}})),Object(j.firestoreConnect)([{collection:"profile"}]))((function(e){var t=e.suggestion,n=e.following,r=(e.followers,e.followUser),s=e.auth,c=e.unfollowUser;return Object(h.jsxs)(i.a,{className:"m-auto",children:[Object(h.jsx)(f.a.Img,{src:"https://avatars.githubusercontent.com/u/48760865?v=4",className:"mr-2",style:{borderRadius:"50%",width:"50px",height:"50px"}}),Object(h.jsxs)(f.a.Text,{children:[t.username,Object(h.jsx)("br",{}),Object(h.jsx)("span",{className:"mb-2 text-muted",children:"".concat(t.fname," ").concat(t.lname)})]}),Object(h.jsx)(l.a,{children:Object(h.jsx)(b.LinkContainer,{to:"#",children:"XBODMyuxsjQCw7LDM6ivYt0Atqq1"===t.id?Object(h.jsx)(f.a.Link,{className:"float-right text-white"}):(null===n||void 0===n?void 0:n.includes(t.id))?Object(h.jsx)(f.a.Link,{className:"float-right text-white",onClick:function(){return c(t.id)},children:"Unfollow"}):Object(h.jsx)(f.a.Link,{className:"float-right text-white",onClick:function(){s.uid?r(t.id):alert("Login first!")},children:"Follow"})})})]})})),S=function(){return Object(h.jsxs)(i.a,{children:[Object(h.jsx)(l.a,{className:"float-left m-2",children:Object(h.jsx)("p",{className:"lead",children:"Suggestions"})}),Object(h.jsx)(l.a,{children:Object(h.jsx)("p",{className:"float-right m-2 lead",children:"See all"})})]})},E=Object(d.d)(Object(u.b)((function(e){return{profile:e.firebase.profile,users:e.firestore.ordered.profile}})),Object(j.firestoreConnect)([{collection:"profile"}]))((function(e){var t=e.profile,n=e.users;return Object(h.jsxs)(f.a,{className:"bg-dark position-fixed border-white",style:{width:"450px"},children:[Object(h.jsx)(m,{profile:t}),Object(h.jsx)(S,{}),Object(h.jsx)(l.a,{children:Object(h.jsx)("div",{style:{overflowY:"scroll",height:"350px"},children:null===n||void 0===n?void 0:n.map((function(e,t){return Object(h.jsx)(y,{suggestion:e},e.id)}))})})]})})),L=n(65),F=n(233),I=n(112),R=n.n(I),U=n(437),A="CREATE_CONFESSION_ERROR",_="CREATE_CONFESSION_SUCCESS",T="GET_CONFESSION",D="LIKE_CONFESSION",P="UNLIKE_CONFESSION",B="DELETE_CONFESSION",M="UPDATE_CONFESSION",W=Object(u.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{unfollowUser:function(t){return e(N(t))},likeConfession:function(t){return e(function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n,r,s){var c,o,a,i,l,u,d;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.getFirebase,c=s.getFirestore,t.prev=1,o=c(),a=r().firebase.auth.uid,t.next=6,o.collection("confessions").doc(e).get();case 6:return i=t.sent,(l=i.data().likes)||(l=[]),l.push(a),t.next=12,o.collection("profile").doc(a).get();case 12:return u=t.sent,(d=u.data().likedConfessions)||(d=[]),d.push(e),l=new Set(l),d=new Set(d),l=Object(x.a)(l),d=Object(x.a)(d),t.next=22,o.collection("confessions").doc(e).update({likes:l});case 22:return t.next=24,o.collection("profile").doc(a).update({likedConfessions:d});case 24:n({type:D}),t.next=30;break;case 27:t.prev=27,t.t0=t.catch(1),console.log(t.t0);case 30:case"end":return t.stop()}}),t,null,[[1,27]])})));return function(e,n,r){return t.apply(this,arguments)}}()}(t))},unlikeConfession:function(t){return e(function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n,r,s){var c,o,a,i,l,u,d;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.getFirebase,c=s.getFirestore,t.prev=1,o=c(),a=r().firebase.auth.uid,t.next=6,o.collection("confessions").doc(e).get();case 6:return i=t.sent,l=(l=i.data().likes).filter((function(e){return e!==a})),t.next=11,o.collection("profile").doc(a).get();case 11:return u=t.sent,d=(d=u.data().likedConfessions).filter((function(t){return t!==e})),t.next=16,o.collection("confessions").doc(e).update({likes:l});case 16:return t.next=18,o.collection("profile").doc(a).update({likedConfessions:d});case 18:n({type:P}),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(1),console.log(t.t0);case 24:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e,n,r){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t,n=e.following,r=e.confession,s=e.followUser,c=e.auth,o=e.unfollowUser,a=e.likeConfession,u=e.unlikeConfession,d=function(e){var t;c.uid?("Follow"===e.target.innerHTML&&s(r.userId),("fas fa-heart"===e.target.className||"far fa-heart"===e.target.className)&&((null===(t=r.likes)||void 0===t?void 0:t.includes(c.uid))?u(r.id):a(r.id))):alert("Login first!")};return Object(h.jsxs)(i.a,{children:[Object(h.jsxs)(l.a,{children:[Object(h.jsx)(b.LinkContainer,{to:"#",onClick:d,children:Object(h.jsx)(f.a.Link,{className:"text-white",children:function(){var e,t;return Object(h.jsxs)("i",{className:"".concat((null===(e=r.likes)||void 0===e?void 0:e.includes(c.uid))?"fas":"far"," fa-heart"),children:[" ",0|(null===(t=r.likes)||void 0===t?void 0:t.length)]})}()})}),Object(h.jsx)(b.LinkContainer,{to:"/confession/".concat(r.id,"/#comments"),children:Object(h.jsx)(f.a.Link,{className:"text-white",children:Object(h.jsxs)("i",{className:"far fa-comment",children:[" ",0|(null===(t=r.comments)||void 0===t?void 0:t.length)]})})})]}),Object(h.jsx)(l.a,{md:2,children:Object(h.jsx)(b.LinkContainer,{to:"#",children:"XBODMyuxsjQCw7LDM6ivYt0Atqq1"===r.userId?Object(h.jsx)(f.a.Link,{className:"float-right text-white"}):(null===n||void 0===n?void 0:n.includes(r.userId))?Object(h.jsx)(f.a.Link,{className:"float-right text-white",onClick:function(){return o(r.userId)},children:"Unfollow"}):Object(h.jsx)(f.a.Link,{className:"float-right text-white",onClick:d,children:"Follow"})})})]})})),G=Object(u.b)((function(e){return{followers:e.firebase.profile.followers,following:e.firebase.profile.following,auth:e.firebase.auth}}),(function(e){return{followUser:function(t){return e(C(t))},getConfession:function(t){return e(function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n,r,s){var c,o,a,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.getFirebase,c=s.getFirestore,t.prev=1,o=c(),t.next=5,o.collection("confessions").doc(e).get();case 5:return a=t.sent,(i=a.data().views)?i++:i=1,t.next=10,o.collection("confessions").doc(e).update({views:i});case 10:n({type:T,confession:a}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e,n,r){return t.apply(this,arguments)}}()}(t))},deleteConfession:function(t){return e(function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n,r,s){var c,o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.getFirebase,c=s.getFirestore,t.prev=1,o=c(),t.next=5,o.collection("confessions").doc(e).delete();case 5:n({type:B}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,r){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t,n,r=e.confession,s=e.followUser,c=(e.followers,e.following),o=e.getConfession,l=e.auth,u=e.deleteConfession,d=e.edit,j=Object(a.l)();return Object(h.jsxs)(f.a,{className:"bg-dark overflow-hidden border-white",children:[Object(h.jsxs)(i.a,{className:"ml-2",children:[Object(h.jsx)(f.a.Img,{src:"https://avatars.githubusercontent.com/u/48760865?v=4",className:"mr-2",style:{borderRadius:"50%",width:"50px",height:"50px"}}),Object(h.jsxs)(f.a.Text,{children:[r.username," ",Object(h.jsx)("span",{className:"m-3",children:l.uid===r.userId?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(b.LinkContainer,{to:"#create-confession",onClick:function(){return d(r)},children:Object(h.jsx)(f.a.Link,{className:"text-white",children:Object(h.jsx)("i",{className:"fas fa-edit"})})}),Object(h.jsx)(b.LinkContainer,{to:"/",onClick:function(){return u(r.id)},children:Object(h.jsx)(f.a.Link,{className:"text-white",children:Object(h.jsx)("i",{className:"fas fa-trash-alt",children:" "})})})]}):null}),Object(h.jsx)("br",{}),Object(h.jsx)("span",{className:"mb-2 text-muted",children:"".concat(r.userFname," ").concat(r.userLname)})]})]}),Object(h.jsx)(i.a,{className:"ml-2",children:Object(h.jsxs)("span",{className:"text-muted",children:[0|r.views," views \xb7 ",R()(null===(t=r.createdAt)||void 0===t?void 0:t.toDate()).endOf("day").fromNow()]})}),Object(h.jsxs)(U.a,{fluid:!0,children:[j.pathname!=="/confession/".concat(r.id)?null===(n=r.content)||void 0===n?void 0:n.substring(0,100):r.content,Object(h.jsx)(b.LinkContainer,{to:"/confession/".concat(r.id),onClick:function(){return o(r.id)},children:Object(h.jsx)(f.a.Link,{className:"text-secondary",children:j.pathname==="/confession/".concat(r.id)?"":" Read More..."})})]}),Object(h.jsx)(f.a,{className:"bg-dark pl-3 pt-2 pb-2 pr-3",children:Object(h.jsx)(W,{following:c,confession:r,followUser:s})})]})})),q=n(8),Y=n(38),K=n(36),X=n(37),J=n(40),Q=n(39),z=function(e){Object(J.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(K.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={content:"",location:e.props.location.pathname},e.handleChange=function(t){e.setState(Object(Y.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),"Confess"===t.target.innerText&&e.props.createConfession(e.state),"Edit"===t.target.innerText&&e.props.editConfession(Object(q.a)(Object(q.a)({},e.state),{},{id:e.props.editableConfession.id})),e.reset(),e.props.edit(null)},e.reset=function(t){e.setState({content:""})},e}return Object(X.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t;this.setState({content:e.editableConfession?null===(t=e.editableConfession)||void 0===t?void 0:t.content:""})}},{key:"render",value:function(){return Object(h.jsx)("div",{id:"create-confession",className:"".concat(this.props.location.pathname.startsWith("/confession")?"position-fixed":""),children:Object(h.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("textarea",{required:!0,type:"text",id:"content",rows:10,cols:50,value:this.state.content,className:"form-control bg-dark text-white border-white",placeholder:"Confess here".concat("/explore"===this.props.location.pathname?" Anonymously":"","..."),onChange:this.handleChange})}),Object(h.jsx)("button",{type:"submit",className:"btn btn-secondary btn-block btn-sm border-white",children:this.props.editableConfession||this.props.location.pathname.startsWith("/confession")?"Edit":"Confess"})]})})}}]),n}(r.Component),H=Object(u.b)(null,(function(e){return{createConfession:function(t){return e(function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n,r,s){var c,o,a,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.getFirebase,c=s.getFirestore,t.prev=1,o=c(),"/explore"!==e.location){t.next=8;break}return t.next=6,o.collection("confessions").add({content:e.content,createdAt:new Date,username:"anonymous",userFname:"Anonymous",userLname:"User",userId:"XBODMyuxsjQCw7LDM6ivYt0Atqq1"});case 6:t.next=12;break;case 8:return a=r().firebase.profile,i=r().firebase.auth.uid,t.next=12,o.collection("confessions").add({content:e.content,createdAt:new Date,username:a.username,userFname:a.fname,userLname:a.lname,userId:i});case 12:n({type:_,confession:e}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),n({type:A,error:t.t0});case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e,n,r){return t.apply(this,arguments)}}()}(t))},editConfession:function(t){return e(function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n,r,s){var c,o,a,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.getFirebase,c=s.getFirestore,t.prev=1,o=e.content,a=e.id,i=c(),t.next=6,i.collection("confessions").doc(a).update({content:o});case 6:n({type:M}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n,r){return t.apply(this,arguments)}}()}(t))}}}))(Object(a.o)(z)),V=Object(d.d)(Object(u.b)((function(e,t){var n=e.firebase.auth;return{confessions:e.firestore.ordered.confessions,auth:n}})),Object(j.firestoreConnect)([{collection:"confessions",limit:20,orderBy:["createdAt","desc"],startAfter:0}]))((function(e){var t=e.confessions,n=e.auth,s=Object(r.useState)(null),c=Object(L.a)(s,2),o=c[0],i=c[1],l=Object(a.l)();"/likes"===l.pathname&&(t=t.filter((function(e){var t;if(null===(t=e.likes)||void 0===t?void 0:t.includes(n.uid))return e})));var u=function(e){i(e)},d={default:"/explore"===l.pathname?4:"/likes"===l.pathname?5:3,1100:2,700:1};return Object(h.jsxs)(F.a,{breakpointCols:d,className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:["/likes"!==l.pathname?Object(h.jsx)(H,{editableConfession:o,edit:u}):null,t&&t.map((function(e,t){return Object(h.jsx)("div",{children:Object(h.jsx)(G,{confession:e,edit:u})},e.id)}))]})})),Z=Object(u.b)((function(e){return{auth:e.firebase.auth}}))((function(e){return e.auth.uid?Object(h.jsxs)(i.a,{children:[Object(h.jsx)(l.a,{sm:12,md:12,lg:7,xl:8,children:Object(h.jsx)(V,{})}),Object(h.jsx)(l.a,{sm:12,md:12,lg:5,xl:4,children:Object(h.jsx)(E,{})})]}):Object(h.jsx)(a.c,{to:"/explore"})})),$=n(438),ee=n(439),te="SIGNIN_SUCCESS",ne="SIGNIN_ERROR",re="SIGNUP_ERROR",se="SIGNUP_SUCCESS",ce="SIGNOUT_SUCCESS",oe="SIGNOUT_ERROR",ae=Object(u.b)(null,(function(e){return{signOut:function(){return e(function(){var e=Object(g.a)(O.a.mark((function e(t,n,r){var s,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.getFirebase,c=s(),e.next=4,c.auth().signOut();case 4:t({type:ce});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.signOut;return Object(h.jsx)($.a,{id:"basic-navbar-nav",className:"right",children:Object(h.jsxs)(ee.a,{className:"mr-auto",children:[Object(h.jsx)(b.LinkContainer,{to:"/",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-home"})})}),Object(h.jsx)(b.LinkContainer,{to:"/messenger",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-comments"})})}),Object(h.jsx)(b.LinkContainer,{to:"/likes",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-heart"})})}),Object(h.jsx)(b.LinkContainer,{to:"/explore",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-compass"})})}),Object(h.jsx)(b.LinkContainer,{to:"/explore",children:Object(h.jsx)(ee.a.Link,{onClick:t,children:Object(h.jsx)("i",{className:"fas fa-sign-out-alt"})})}),Object(h.jsx)(b.LinkContainer,{to:"/account",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("img",{src:"https://avatars.githubusercontent.com/u/48760865?v=4",style:{borderRadius:"50%",width:"40px",height:"40px",marginTop:"-7px"}})})})]})})})),ie=function(){return Object(h.jsx)($.a,{id:"basic-navbar-nav",className:"right",children:Object(h.jsxs)(ee.a,{className:"mr-auto",children:[Object(h.jsx)(b.LinkContainer,{to:"/",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-home"})})}),Object(h.jsx)(b.LinkContainer,{to:"/explore",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-compass"})})}),Object(h.jsx)(b.LinkContainer,{to:"/signin",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-sign-in-alt"})})}),Object(h.jsx)(b.LinkContainer,{to:"/signup",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("i",{className:"fas fa-user-plus"})})}),Object(h.jsx)(b.LinkContainer,{to:"/account",children:Object(h.jsx)(ee.a.Link,{children:Object(h.jsx)("img",{src:"https://static.thenounproject.com/png/302770-200.png",style:{borderRadius:"50%",width:"40px",height:"40px",marginTop:"-7px"}})})})]})})},le=Object(u.b)((function(e){return{auth:e.firebase.auth}}))((function(e){var t=e.auth,n=Object(r.useState)([{profilePic:"https://avatars.githubusercontent.com/u/48760865?v=4"}]),s=Object(L.a)(n,2);s[0],s[1];return Object(h.jsx)($.a,{style:{background:"rgba(21, 0, 21, 0.5)",borderBottom:"1px solid white"},variant:"dark",expand:"lg",className:"sticky-top",collapseOnSelect:!0,children:Object(h.jsxs)(U.a,{fluid:!0,children:[Object(h.jsx)(b.LinkContainer,{to:"/",children:Object(h.jsx)($.a.Brand,{children:"Confession"})}),t.uid?Object(h.jsx)(ae,{}):Object(h.jsx)(ie,{})]})})})),ue=function(e){Object(J.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(K.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(Y.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signIn(e.state)},e}return Object(X.a)(n,[{key:"render",value:function(){return this.props.auth.uid?Object(h.jsx)(a.c,{to:"/"}):Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(h.jsx)("h3",{children:"Sign In"}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Email address"}),Object(h.jsx)("input",{type:"email",id:"email",className:"form-control",placeholder:"Enter email",onChange:this.handleChange})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{type:"password",id:"password",className:"form-control",placeholder:"Enter password",onChange:this.handleChange})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(h.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),Object(h.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Remember me"})]})}),Object(h.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Submit"})]})})}}]),n}(r.Component),de=Object(u.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e(function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n,r,s){var c,o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=s.getFirebase,t.prev=1,o=c(),t.next=5,o.auth().signInWithEmailAndPassword(e.email,e.password);case 5:n({type:te}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:ne,error:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,r){return t.apply(this,arguments)}}()}(t))}}}))(ue),je=function(e){Object(J.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(K.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:"",fname:"",lname:"",username:""},e.handleChange=function(t){e.setState(Object(Y.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signUp(e.state)},e}return Object(X.a)(n,[{key:"render",value:function(){return this.props.auth.uid?Object(h.jsx)(a.c,{to:"/"}):Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(h.jsx)("h3",{children:"Register"}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"First Name"}),Object(h.jsx)("input",{type:"text",id:"fname",className:"form-control",placeholder:"Enter First Name",onChange:this.handleChange})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Last Name"}),Object(h.jsx)("input",{type:"text",id:"lname",className:"form-control",placeholder:"Enter Last Name",onChange:this.handleChange})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Email address"}),Object(h.jsx)("input",{type:"email",id:"email",className:"form-control",placeholder:"Enter email",onChange:this.handleChange})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{type:"password",id:"password",className:"form-control",placeholder:"Enter password",onChange:this.handleChange})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(h.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),Object(h.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Remember me"})]})}),Object(h.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Sign Up"})]})})}}]),n}(r.Component),fe=Object(u.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{signUp:function(t){return e(function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n,r,s){var c,o,a,i,l;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=s.getFirebase,o=s.getFirestore,t.prev=1,a=c(),i=o(),t.next=6,a.auth().createUserWithEmailAndPassword(e.email,e.password);case 6:return l=t.sent,t.next=9,i.collection("profile").doc(l.user.uid).set({fname:e.fname,lname:e.lname,username:e.email.split("@")[0],followers:[l.user.uid],following:[l.user.uid]});case 9:n({type:"SIGNUP_SUCCESS"}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),n({type:re,error:t.t0});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,n,r){return t.apply(this,arguments)}}()}(t))}}}))(je),be="CREATE_COMMENT",he=function(e){Object(J.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(K.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={content:"",confession:e.props.confession},e.handleChange=function(t){e.setState(Object(Y.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.createComment(e.state),e.reset()},e.reset=function(t){e.setState({content:""})},e}return Object(X.a)(n,[{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("textarea",{required:!0,type:"text",id:"content",rows:5,cols:50,value:this.state.content,className:"form-control bg-dark text-white border-white",placeholder:"Comment here".concat("/explore"===this.props.location.pathname?" Anonymously":"","..."),onChange:this.handleChange})}),Object(h.jsx)("button",{type:"submit",className:"btn btn-secondary btn-block btn-sm border-white",children:"Comment"})]}),Object(h.jsx)("hr",{})]})}}]),n}(r.Component),me=Object(u.b)(null,(function(e){return{createComment:function(t){return e(function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n,r,s){var c,o,a,i,l,u,d,j,f;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.getFirebase,c=s.getFirestore,t.prev=1,o=c(),a=r().firebase.auth.uid,t.next=6,o.collection("comments").add({content:e.content,confessionId:e.confession.id,userId:a,createdAt:new Date,likes:[]});case 6:return i=t.sent,t.next=9,o.collection("profile").doc(a).get();case 9:return l=t.sent,(u=l.data().commentedConfessions)||(u=[]),u.push(i.id),t.next=15,o.collection("confessions").doc(e.confession.id).get();case 15:return d=t.sent,j=d.data().comments,f=d.data().commentsFrom,j||(j=[]),j.push(i.id),f||(f=[]),f.push(a),f=new Set(f),f=Object(x.a)(f),t.next=26,o.collection("profile").doc(a).update({commentedConfessions:u});case 26:return t.next=28,o.collection("confessions").doc(e.confession.id).update({comments:j,commentsFrom:f});case 28:n({type:be}),t.next=34;break;case 31:t.prev=31,t.t0=t.catch(1),console.log(t.t0);case 34:case"end":return t.stop()}}),t,null,[[1,31]])})));return function(e,n,r){return t.apply(this,arguments)}}()}(t))}}}))(Object(a.o)(he)),pe=function(e){var t=e.comment,n=e.profile;return Object(h.jsxs)("div",{children:[Object(h.jsxs)(i.a,{children:[Object(h.jsx)(l.a,{style:{maxWidth:"60px"},children:Object(h.jsx)(f.a.Img,{src:"https://avatars.githubusercontent.com/u/48760865?v=4",className:"mr-2",style:{borderRadius:"50%",width:"50px",height:"50px"}})}),Object(h.jsx)(l.a,{children:Object(h.jsxs)(f.a.Text,{children:[null===n||void 0===n?void 0:n.username," \xb7 ",Object(h.jsx)("span",{className:"mb-2 text-muted",children:"".concat(R()(t.createdAt.toDate()).endOf("day").fromNow())}),Object(h.jsx)("br",{}),Object(h.jsx)("span",{className:"mb-2 text-muted",children:"".concat(null===n||void 0===n?void 0:n.fname," ").concat(null===n||void 0===n?void 0:n.lname)})]})})]}),Object(h.jsx)(U.a,{children:t.content})]})},Oe=Object(d.d)(Object(u.b)((function(e,t){var n,r,s=e.firestore.ordered.comments;return{comments:s=null===(r=s=null===(n=s)||void 0===n?void 0:n.filter((function(e){return e.confessionId===t.confession.id})))||void 0===r?void 0:r.map((function(t){return{comment:t,profile:e.firestore.data.profile?e.firestore.data.profile[t.userId]:null}}))}})),Object(j.firestoreConnect)((function(e){return[{collection:"comments",orderBy:["createdAt","desc"],limit:20},{collection:"profile"}]})))((function(e){var t,n,r=e.comments,s=e.confession;return Object(h.jsxs)(f.a,{bg:"dark",style:{border:"1px solid white"},className:"p-3",children:[Object(h.jsxs)("div",{className:"position-sticky",children:[Object(h.jsxs)(f.a.Title,{children:["".concat(0|(null===(t=s.comments)||void 0===t?void 0:t.length))," Comment",1===(null===(n=s.comments)||void 0===n?void 0:n.length)?"":"s"]}),Object(h.jsx)("div",{children:Object(h.jsx)(me,{confession:s})})]}),null===r||void 0===r?void 0:r.map((function(e){return Object(h.jsxs)("div",{children:[Object(h.jsx)(pe,{comment:e.comment,profile:e.profile}),Object(h.jsx)("hr",{})]},e.comment.id)}))]})})),xe=Object(d.d)(Object(u.b)((function(e,t){var n=t.match.params.id,r=e.firestore.data.confessions,s=r?r[n]:null;return{confession:s=Object(q.a)(Object(q.a)({},s),{},{id:n}),auth:e.firebase.auth}})),Object(j.firestoreConnect)((function(e){return[{collection:"confessions",doc:e.match.params.id}]})))((function(e){var t=e.confession,n=e.auth,s=Object(r.useState)(null),c=Object(L.a)(s,2),o=c[0],a=c[1],u=function(e){a(e)};return Object(h.jsx)(U.a,{fluid:!0,children:Object(h.jsxs)(i.a,{children:[Object(h.jsxs)(l.a,{lg:8,md:8,sm:12,children:[Object(h.jsx)(G,{confession:t,edit:u}),Object(h.jsx)("br",{}),Object(h.jsx)(Oe,{confession:t})]}),t.userId===n.uid?Object(h.jsx)(l.a,{lg:4,md:4,sm:12,children:Object(h.jsx)(H,{editableConfession:o,edit:u})}):null]})})})),ge=function(){return Object(h.jsx)(V,{})},ve=(n(402),function(){return Object(h.jsxs)(o.BrowserRouter,{children:[Object(h.jsx)(le,{className:"position-fixed"}),Object(h.jsxs)("main",{className:"py-3 text-white container-fluid",children:[Object(h.jsx)(a.d,{path:"/",exact:!0,component:Z}),Object(h.jsx)(a.d,{path:"/signin",component:de}),Object(h.jsx)(a.d,{path:"/signup",component:fe}),Object(h.jsx)(a.d,{path:"/confess",component:H}),Object(h.jsx)(a.d,{path:"/explore",component:ge}),Object(h.jsx)(a.d,{path:"/confession/:id",component:xe}),Object(h.jsx)(a.d,{path:"/likes",component:V})]})]})}),we=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,441)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),s(e),c(e),o(e)}))},ke=n(236),Ce=n(81),Ne={auth:{authError:null}},ye={follow:{followError:null}},Se="GET_USERS",Ee={users:[]},Le={comment:{commentError:null}},Fe=Object(d.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return console.log("Signin Success"),Object(q.a)(Object(q.a)({},e),{},{authError:null});case ne:return console.log("Signin Error"),Object(q.a)(Object(q.a)({},e),{},{authError:t.error});case se:return console.log("Signup Success"),Object(q.a)(Object(q.a)({},e),{},{authError:null});case re:return console.log("Signup Error"),Object(q.a)(Object(q.a)({},e),{},{authError:t.error});case ce:return console.log("Signout Success"),Object(q.a)(Object(q.a)({},e),{},{authError:null});case oe:return console.log("Signout Error"),Object(q.a)(Object(q.a)({},e),{},{authError:t.error});default:return e}},confessions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return console.log(t.confession),e;case A:return console.log("create confession error"),e;case T:return t.confession;case D:return console.log("like succcess"),e;case P:return console.log("unlike success"),e;case B:return console.log("delete confession success"),e;case M:return console.log("update confession success"),e;default:return e}},follow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return console.log("Follow Success"),Object(q.a)(Object(q.a)({},e),{},{followError:null});case w:return console.log("Follow error"),Object(q.a)(Object(q.a)({},e),{},{followError:t.error});case k:return console.log("unfollow success"),Object(q.a)(Object(q.a)({},e),{},{followError:null});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Se:return Object(q.a)(Object(q.a)({},e),{},{users:t.snapshots});default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return console.log("comment success"),Object(q.a)(Object(q.a)({},e),{},{commentError:null});default:return e}},firestore:Ce.firestoreReducer,firebase:j.firebaseReducer}),Ie=n(115);n(433),n(430);Ie.a.initializeApp({apiKey:"AIzaSyAxvrD76ypETsfy64vEjDjYvIFJvX_se8w",authDomain:"confessions-ef73b.firebaseapp.com",projectId:"confessions-ef73b",storageBucket:"confessions-ef73b.appspot.com",messagingSenderId:"180663555283",appId:"1:180663555283:web:51a8ddab09d8372e803026",measurementId:"G-S5KVS39SWM"}),Ie.a.firestore().settings({timeStampsInSnapshots:!0});var Re=Ie.a,Ue=Object(d.e)(Fe,Object(d.d)(Object(d.a)(ke.a.withExtraArgument({getFirebase:j.getFirebase,getFirestore:Ce.getFirestore})),Object(j.reactReduxFirebase)(Re,{attachAuthIsReady:!0,useFirestoreForProfile:!0,userProfile:"profile"}),Object(Ce.reduxFirestore)(Re)));Ue.firebaseAuthIsReady.then((function(){c.a.render(Object(h.jsx)(u.a,{store:Ue,children:Object(h.jsx)(ve,{})}),document.getElementById("root"))})),we()}},[[432,1,2]]]);
//# sourceMappingURL=main.6df37812.chunk.js.map